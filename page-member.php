<?php

/**
 * Template Name: Member Page
 */
if (!is_user_logged_in()) {
  login_first_redirect();
} else {
	get_header();
?>

<header id="site-content" class="news-item__header
  <?php if ( !has_post_thumbnail() ) echo 'news-item__header--short-header'; ?>">

  <h1 class="news-item__title--large"><?php the_title(); ?></h1>

  <div class="news-item__meta--large">
    <?php if ( is_page() && $post->post_parent ): ?>
      <a href="<?php echo get_permalink($post->post_parent); ?>"
        class="news-item__category">
        ⬉ to <?php echo get_the_title($post->post_parent); ?>
      </a>
    <?php endif; ?>
  </div>

  <?php if ( has_post_thumbnail() ) : ?>
    <?php the_post_thumbnail('post-thumbnail',
      array( 'class' => 'news-item__thumb--large')
    ); ?>
  <?php endif; ?>

</header>

<?php if ( is_page() && !$post->post_parent ): ?>
  <div class="memberspace">
    <style>.memberspace__cls-1{fill:#11417e;}.memberspace__cls-2{fill:var(--theme-color)}</style>
    <a href="<?php echo get_home_url(null, 'members/committee-info'); ?>" class="memberspace__sign">
      <svg class="memberspace__item" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 303.74 128.74">
        <g id="Layer_2" data-name="Layer 2"><g id="Layer_2-2" data-name="Layer 2"><path class="memberspace__cls-1" d="M7.35,126.15A3.47,3.47,0,0,1,4,122.81c-1.09-18.92-.6-114,1.58-117.48C8,1.56,294.07,4.08,300.08,7.85s3.6,115.68,0,119.45C296.69,130.85,38,126.8,7.35,126.15Z"/><path class="memberspace__cls-2" d="M3.88,122.68a3.46,3.46,0,0,1-3.32-3.34C-.53,100.42,0,5.3,2.15,1.87,4.55-1.91,290.6.61,296.61,4.38s3.61,115.68,0,119.46C293.22,127.39,34.55,123.33,3.88,122.68Z"/><path class="memberspace__cls-1" d="M137.92,43.67l1-2.64a7.66,7.66,0,0,0,2.23,1.12,8.29,8.29,0,0,0,2.52.39,3.06,3.06,0,0,0,1.5-.3,1,1,0,0,0,.53-.88.91.91,0,0,0-.38-.76,3.65,3.65,0,0,0-1.33-.47l-2.08-.48a5.41,5.41,0,0,1-2.7-1.28,3.19,3.19,0,0,1-.87-2.34,3.46,3.46,0,0,1,.69-2.11A4.44,4.44,0,0,1,141,32.48a7.38,7.38,0,0,1,2.84-.51,8.59,8.59,0,0,1,2.66.41,8.28,8.28,0,0,1,2.34,1.17l-1.06,2.53a8.39,8.39,0,0,0-2-1,6.16,6.16,0,0,0-2-.35,2.75,2.75,0,0,0-1.46.33,1,1,0,0,0-.53.9.85.85,0,0,0,.32.69,2.56,2.56,0,0,0,1.11.44l2.14.48a5.67,5.67,0,0,1,2.84,1.36,3.64,3.64,0,0,1-.58,5.27,6.7,6.7,0,0,1-4,1A9.34,9.34,0,0,1,137.92,43.67Z"/><path class="memberspace__cls-1" d="M173.35,32.29V45h-3.7V43.16a4.1,4.1,0,0,1-1.58,1.54,4.59,4.59,0,0,1-2.21.52,4.49,4.49,0,0,1-3.56-1.33,5.86,5.86,0,0,1-1.18-4V32.29h3.79V40q0,2.31,2,2.31a2.46,2.46,0,0,0,1.91-.8,3,3,0,0,0,.73-2.11V32.29Z"/><path class="memberspace__cls-1" d="M188.73,26.54V45H185V43.14a4,4,0,0,1-1.63,1.53,5,5,0,0,1-2.39.55,5.19,5.19,0,0,1-2.91-.84,5.61,5.61,0,0,1-2-2.36,8.16,8.16,0,0,1-.71-3.48,8,8,0,0,1,.71-3.45,5.56,5.56,0,0,1,2-2.31A5.3,5.3,0,0,1,181,32a5,5,0,0,1,2.34.54A3.93,3.93,0,0,1,184.94,34V26.54Zm-4.49,14.83a4.47,4.47,0,0,0,.75-2.78,4.37,4.37,0,0,0-.76-2.75,2.61,2.61,0,0,0-2.15-1,2.68,2.68,0,0,0-2.19.95,4.24,4.24,0,0,0-.77,2.71,4.48,4.48,0,0,0,.77,2.8,2.89,2.89,0,0,0,4.35,0Z"/><path class="memberspace__cls-1" d="M204.78,32.29,198.91,45.7a8.31,8.31,0,0,1-2.73,3.58,9.14,9.14,0,0,1-4,1.47l-.88-2.91a8.11,8.11,0,0,0,2.65-1,3.84,3.84,0,0,0,1.4-1.68l.37-.83-5.24-12.08h4l3.27,8.26L201,32.29Z"/><path class="memberspace__cls-1" d="M151.5,58.89V71.62h-3.74V69.74a4.08,4.08,0,0,1-1.63,1.53,5.19,5.19,0,0,1-2.39.55,5.37,5.37,0,0,1-2.92-.8,5.47,5.47,0,0,1-2-2.3,7.88,7.88,0,0,1-.71-3.45,8.09,8.09,0,0,1,.71-3.49,5.54,5.54,0,0,1,2-2.38,5.17,5.17,0,0,1,2.91-.84,4.86,4.86,0,0,1,2.39.58,4.15,4.15,0,0,1,1.63,1.56V58.89ZM147,68a4.4,4.4,0,0,0,.75-2.76,4.47,4.47,0,0,0-.75-2.78,2.88,2.88,0,0,0-4.35,0,4.45,4.45,0,0,0-.78,2.79,4.24,4.24,0,0,0,.77,2.72,2.66,2.66,0,0,0,2.2.94A2.62,2.62,0,0,0,147,68Z"/><path class="memberspace__cls-1" d="M153.73,70.26l1-2.63A7.89,7.89,0,0,0,157,68.74a8.27,8.27,0,0,0,2.51.39,3.08,3.08,0,0,0,1.51-.3,1,1,0,0,0,.53-.88.88.88,0,0,0-.38-.75,3.82,3.82,0,0,0-1.33-.48l-2.08-.48A5.21,5.21,0,0,1,155,65a3.15,3.15,0,0,1-.87-2.33,3.44,3.44,0,0,1,.69-2.11,4.44,4.44,0,0,1,1.92-1.44,7.19,7.19,0,0,1,2.84-.52,8.65,8.65,0,0,1,2.66.42,8,8,0,0,1,2.34,1.16l-1.06,2.54a8.21,8.21,0,0,0-2-1,6.16,6.16,0,0,0-2-.35,2.85,2.85,0,0,0-1.46.32,1,1,0,0,0-.53.91.87.87,0,0,0,.32.69,2.77,2.77,0,0,0,1.11.44l2.14.48A5.67,5.67,0,0,1,164,65.49a3.3,3.3,0,0,1,.88,2.41,3.33,3.33,0,0,1-1.45,2.86,6.64,6.64,0,0,1-4,1.06A9.32,9.32,0,0,1,153.73,70.26Z"/><path class="memberspace__cls-1" d="M166.36,70.26l1-2.63a7.89,7.89,0,0,0,2.23,1.11,8.27,8.27,0,0,0,2.51.39,3.08,3.08,0,0,0,1.51-.3,1,1,0,0,0,.53-.88.88.88,0,0,0-.38-.75,3.82,3.82,0,0,0-1.33-.48l-2.08-.48a5.25,5.25,0,0,1-2.7-1.28,3.15,3.15,0,0,1-.87-2.33,3.44,3.44,0,0,1,.69-2.11,4.44,4.44,0,0,1,1.92-1.44,7.19,7.19,0,0,1,2.84-.52,8.65,8.65,0,0,1,2.66.42,8,8,0,0,1,2.34,1.16l-1.06,2.54a8.21,8.21,0,0,0-2-1,6.16,6.16,0,0,0-2-.35,2.85,2.85,0,0,0-1.46.32,1,1,0,0,0-.53.91.87.87,0,0,0,.32.69,2.77,2.77,0,0,0,1.11.44l2.14.48a5.67,5.67,0,0,1,2.83,1.35,3.3,3.3,0,0,1,.88,2.41,3.33,3.33,0,0,1-1.45,2.86,6.64,6.64,0,0,1-4,1.06A9.32,9.32,0,0,1,166.36,70.26Z"/><path class="memberspace__cls-1" d="M182.35,71A5.6,5.6,0,0,1,180,68.71a8.05,8.05,0,0,1,0-7,5.6,5.6,0,0,1,2.34-2.31,8.21,8.21,0,0,1,7.07,0,5.67,5.67,0,0,1,2.32,2.31,8.05,8.05,0,0,1,0,7A5.67,5.67,0,0,1,189.42,71a8.21,8.21,0,0,1-7.07,0Zm5.7-3a5.69,5.69,0,0,0,0-5.61,2.57,2.57,0,0,0-2.15-.94,2.62,2.62,0,0,0-2.18.94,4.37,4.37,0,0,0-.76,2.8q0,3.74,2.94,3.74A2.59,2.59,0,0,0,188.05,68Z"/><path class="memberspace__cls-1" d="M196.13,70.06a6.45,6.45,0,0,1-1.77-4.79,7,7,0,0,1,.86-3.51,5.9,5.9,0,0,1,2.39-2.36,7.4,7.4,0,0,1,3.58-.84,8.46,8.46,0,0,1,2.69.43A5.51,5.51,0,0,1,206,60.14l-1,2.64a5.93,5.93,0,0,0-1.66-.94,4.9,4.9,0,0,0-1.76-.34,3.13,3.13,0,0,0-2.42.94,3.91,3.91,0,0,0-.87,2.75,4,4,0,0,0,.86,2.77,3.11,3.11,0,0,0,2.43,1,5.13,5.13,0,0,0,1.76-.34,6.19,6.19,0,0,0,1.66-.94l1,2.63a5.83,5.83,0,0,1-2.16,1.15,9.44,9.44,0,0,1-2.78.41A6.64,6.64,0,0,1,196.13,70.06Z"/><path class="memberspace__cls-1" d="M227.41,58.89V71.62h-3.75V69.74A4,4,0,0,1,222,71.27a5.15,5.15,0,0,1-2.38.55,5.41,5.41,0,0,1-2.93-.8,5.52,5.52,0,0,1-2-2.3,7.88,7.88,0,0,1-.72-3.45,8.09,8.09,0,0,1,.72-3.49,5.59,5.59,0,0,1,2-2.38,5.23,5.23,0,0,1,2.92-.84,4.82,4.82,0,0,1,2.38.58,4,4,0,0,1,1.63,1.56V58.89ZM222.91,68a4.4,4.4,0,0,0,.75-2.76,4.47,4.47,0,0,0-.75-2.78,2.87,2.87,0,0,0-4.34,0,4.45,4.45,0,0,0-.78,2.79,4.18,4.18,0,0,0,.77,2.72,2.65,2.65,0,0,0,2.19.94A2.6,2.6,0,0,0,222.91,68Z"/><path class="memberspace__cls-1" d="M250,71a5.58,5.58,0,0,1-2.33-2.31,8,8,0,0,1,0-7A5.58,5.58,0,0,1,250,59.36a7.6,7.6,0,0,1,3.56-.8,7.42,7.42,0,0,1,3.51.8,5.56,5.56,0,0,1,2.32,2.31,8,8,0,0,1,0,7A5.56,5.56,0,0,1,257.1,71a7.42,7.42,0,0,1-3.51.8A7.6,7.6,0,0,1,250,71Zm5.7-3a4.41,4.41,0,0,0,.74-2.81,4.43,4.43,0,0,0-.74-2.8,2.55,2.55,0,0,0-2.14-.94,2.63,2.63,0,0,0-2.19.94,4.43,4.43,0,0,0-.75,2.8q0,3.74,2.94,3.74A2.57,2.57,0,0,0,255.73,68Z"/><path class="memberspace__cls-1" d="M274.84,63.91v7.71h-3.79V64.09a3.17,3.17,0,0,0-.49-2,1.87,1.87,0,0,0-1.55-.62,2.64,2.64,0,0,0-2,.81,3,3,0,0,0-.75,2.16v7.13h-3.79V62.53a30.33,30.33,0,0,0-.2-3.64h3.56l.25,2a4.79,4.79,0,0,1,1.78-1.74,5,5,0,0,1,2.47-.6Q274.83,58.56,274.84,63.91Z"/><path class="memberspace__cls-1" d="M241.12,71.62V58.89h3.79V71.62Z"/><path class="memberspace__cls-1" d="M241,52.91v4l4-1.15V52.91Z"/><path class="memberspace__cls-1" d="M208.33,71.62V58.89h3.79V71.62Z"/><path class="memberspace__cls-1" d="M208.2,52.91v4l4-1.15V52.91Z"/><path class="memberspace__cls-1" d="M238.66,61.73V58.89h-3.23v-4L231.63,56v2.92h-2.41v2.84h2.41v5a5.28,5.28,0,0,0,1.25,3.74,4.68,4.68,0,0,0,3.6,1.33,6.11,6.11,0,0,0,2.18-.35V68.53a5,5,0,0,1-1.25.18,2.1,2.1,0,0,1-1.43-.49,2,2,0,0,1-.55-1.55V61.73Z"/><path class="memberspace__cls-1" d="M159.26,35.13V32.29H156v-4l-3.79,1.08v2.91h-2.41v2.84h2.41v5a5.24,5.24,0,0,0,1.24,3.74,4.68,4.68,0,0,0,3.6,1.33,5.92,5.92,0,0,0,2.19-.35V41.93a5.16,5.16,0,0,1-1.26.18,2.07,2.07,0,0,1-1.43-.49,2,2,0,0,1-.55-1.54V35.13Z"/><path class="memberspace__cls-1" d="M94.08,46.6a7.51,7.51,0,0,0-6.32-3.11h-4.4V65.25h4.4A7.51,7.51,0,0,0,91,64.58a8.55,8.55,0,0,0,2.73-2c1.87-2,2.78-4.68,2.78-8.19a12.14,12.14,0,0,0-2.37-7.73Z"/><path class="memberspace__cls-1" d="M33.1,19.48v87.41l87.41-26.22V19.48ZM61.51,82.85H52.77V43.52h8.74Zm39.36-14.93v0a15.4,15.4,0,0,1-12.64,6.17H74.62V34.78h13.6A15.4,15.4,0,0,1,100.82,41a21.08,21.08,0,0,1,4.39,13.45A21.44,21.44,0,0,1,100.87,67.92Z"/></g></g>
      </svg>
    </a>
    <a href="<?php echo get_home_url(null, 'members/ask-ide'); ?>" class="memberspace__bookcase">
      <svg class="memberspace__item" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 298.49 534.99">
        <g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="memberspace__cls-1" d="M109.93,535c-13.29,0-8.22-481.24-1.44-488.86C120,33.15,283.87,4,294,9.72s.54,438.74-2.34,447.39S120,535,109.93,535Z"/><path class="memberspace__cls-2" d="M294,9.72C283.87,4,201.71,1.51,191.61.06S9,21.62,3.22,33.15.91,505.59,2.35,509.91,96.64,535,109.93,535c-4,0-6.3-42.9-7.44-103.26a5.08,5.08,0,0,0,.37-.52c3.35-5.59,31.28-16.76,31.28-19,0-2.07-27.57,11.6-31.83,8.8-.45-28.06-.67-59.36-.69-91.59.32.1.74-.16,1.24-1,3.35-5.58,31.28-14.52,31.28-16.75s-32.16,11.66-32.4,5.58c0,0,0,1.37-.12,3.29,0-27.18.17-54.86.43-81.68a2.46,2.46,0,0,0,.81-.92c3.35-5.59,31.28-13.41,31.28-15.64s-28.15,9-32,5.41c.32-28.85.77-56.43,1.31-81,5.23-5.23,30.66-9.4,30.66-11.53s-30.16,6.7-30.41.63c1.25-51.62,2.94-87.63,4.76-89.67C120,33.15,283.87,4,294,9.72Z"/></g></g>
      </svg>
      <span class="memberspace__label">Ask the IDE’er</span>
    </a>
    <a href="<?php echo get_home_url(null, 'members/funfunfun'); ?>" class="memberspace__couch">
      <svg class="memberspace__item" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 554.85 290.23">
        <g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="memberspace__cls-2" d="M3.9,73.22c-5.21,8.7-5.19,146.73,0,149.33S433.7,294,441.49,290.07s109.08-38.95,110.38-46.74,5.19-154.52,1.29-158.42-42.85-5.19-45.44-5.19,13-50.64,13-59.73-10.39-16.88-13-16.88S318.14-3.39,310.35,5.7c0,0-1.3-3.89-9.09-5.19S139,.51,135.05,3.11s-13,57.13-11.68,62.32S7.8,66.73,3.9,73.22Z"/><path class="memberspace__cls-1" d="M441.49,290.07c7.8-3.89,109.08-38.95,110.38-46.74s5.19-154.52,1.29-158.42-110.37,13-115.56,24.67C433.76,118.22,437.05,292.3,441.49,290.07Z"/><path class="memberspace__cls-1" d="M32.47,81c-5.81,2.9-1.3,44.14,0,44.14s32.46-10.38,48.05-14.28,41.55-2.6,44.14-3.89-1.29-14.29,5.2-32.47C131.43,70.11,35.07,79.72,32.47,81Z"/></g></g>
      </svg>
      <span class="memberspace__label">Fun fun fun</span>
    </a>
    <a href="<?php echo get_home_url(null, 'members/music'); ?>" class="memberspace__speaker">
      <svg class="memberspace__item" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 147.31 195.67">
        <g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="memberspace__cls-2" d="M3.54,17.89c-6.2,4.13-3,149,0,158S84,198.23,93,195.25c10-3.34,49.18-23.85,50.67-31.3s7.46-146.06,0-152S79.55,0,73.59,0,8,14.9,3.54,17.89Z"/><path class="memberspace__cls-1" d="M93,195.25c10-3.34,49.18-23.85,50.67-31.3s7.46-146.06,0-152S87,29.81,85.52,32.79C82.54,38.75,84,198.23,93,195.25Z"/><path class="memberspace__cls-1" d="M43.74,45.12C43.74,43.27,14,47,14,71.14s24.15,33.44,26,29.72S23.31,95.29,23.31,73,43.74,50.7,43.74,45.12Z"/><path class="memberspace__cls-1" d="M43.74,110.7c0-1.85-29.72,1.86-29.72,26s24.15,33.45,26,29.73-16.72-5.57-16.72-27.87S43.74,116.28,43.74,110.7Z"/></g></g>
      </svg>
      <span class="memberspace__label">Music</span>
    </a>
  </div>
<?php endif; ?>

<main class="primary-content">

  <?php the_content(); ?>
  <?php include('inc/file-list.php'); ?>
  <?php if (get_the_title() == 'Declarations'):
    include('inc/declaration-form.php');
  else: ?>

    <h2>Feedback memberspace</h2>

    <form action="#" class="contact-form__wrap">

        <label for="feedback" class="contact-form__label">
          <?= esc_attr_x('What could be improved? Or what should never change?', 'feedback-form-question', 'svid-theme-domain')?>
        </label>
        <textarea name="feedback" id="feedback" cols="30" rows="6"
          placeholder="<?= esc_attr_x('I would change...', 'feedback-form-placeholder', 'svid-theme-domain') ?>"
          class="contact-form__input-message"
          required></textarea>

        <label for="special" class="contact-form__special">
          <?= esc_attr_x('This is for robots', 'feedback-form-question', 'svid-theme-domain')?>
        </label>
        <input name="special" id="special" type="text" class="contact-form__special"
          placeholder="<?= esc_attr_x('silence', 'feedback-form-placeholder', 'svid-theme-domain') ?>"
          value="">

        <div class="contact-form__validate-and-send">

          <input type="hidden" name="action" value="memberspace_feedback">

          <button type="submit" class="button button--white contact-form__submit">
            <?= esc_attr_x('Send input', 'feedback-form-button', 'svid-theme-domain')?>
          </button>

        </div>

    </form>

  <?php endif; ?>

</main>

<?php
  comments_template();
	get_footer();
}
?>
